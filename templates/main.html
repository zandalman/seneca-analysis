{% extends "base.html" %}
{% block styles %}
    <link href="../static/css/plot.css" rel="stylesheet" type="text/css">
{% endblock %}
{% block title %}plot{% endblock %}
{% block script1 %}<script>{{ form_init_js|safe }}</script>{% endblock %}
{% block content %}
    <i class="material-icons button" style="color:purple;" id="help" title="get tips for using the analysis app">help_outline</i>
    <h1>Analysis</h1><hr class="main">
    <p id="status"></p>
    <i class="fa fa-eraser button" aria-hidden="true" id="erase" title="clear status bar"></i>
    <div id="slider-status-size" title="adjust status bar font size"></div>
    <p>Log path: <span id="log-path">{{ log_path }}</span></p>
    <hr class="main">
    <div class="row">
        <form id="add-routine-form" name="add-routine" method="post" enctype="multipart/form-data">
            <label for="routine-upload">
                <i class="material-icons button" style="color:green;" id="add-routine" title="add routine">add_circle</i>
            </label>
            <input type="file" name="routine" id="routine-upload" style="display: none;"/>
        </form>
        <i class="material-icons button inactive" style="color:red;" id="remove-routine" title="remove selected routines">remove_circle</i>
        <i class="material-icons button" style="color:dodgerblue;" id="toggle-select" title="toggle selected routines">check_box_outline_blank</i>
        <i class="material-icons button inactive" style="color:green;" id="run-routine" title="run selected routines">play_arrow</i>
        <i class="material-icons button inactive" style="color:dodgerblue;" id="pause-routine" title="pause selected routines">pause</i>
        <i class="material-icons button inactive" style="color:red;" id="stop-routine" title="stop selected routines">stop</i>
        <i class="material-icons button" style="color:purple;" id="set-log" title="set log path">history_edu</i>
    </div><hr>
    <div class="row">
        <label for="filter"><i class="material-icons">search</i></label>
        <input type="text" id="filter" title="filter routines by name">
        <ul id="routine-list">
            {%- for id, filename in routines.items() %}
                <li class="routine" id="{{ id }}">{{ filename }}</li>
            {%- endfor %}
        </ul>
    </div><hr class="main">
    <div class="row">
        <i class="material-icons button" style="color:green;" id="start-analysis" title="start analysis">wifi_tethering</i>
        <i class="material-icons" style="color:lightgray; position: relative;">
            wifi_tethering
            <i class="material-icons button inactive" style="color: dodgerblue; position: absolute; left: 0;" id="pause-analysis" title="pause analysis">pause</i>
        </i>
        <i class="material-icons button inactive" style="color:red;" id="stop-analysis" title="stop analysis">portable_wifi_off</i>
        <p id="timer">00.00</p>
        <div id="slider" title="set analysis period" position="relative">
            <div id="custom-handle" class="ui-slider-handle">
                <input type="number" id="period" min="0.1" max="100"/>
                <i class="material-icons">update</i>
            </div>
        </div>
    </div><hr style="margin-top: 20px;">
    <div class="row">
        <div class="column" style="width: 20%">
            <h2>Plots</h2><hr class="main">
            <ul id="plot-list"></ul>
        </div>
        <div class="column" style="width: 80%">
            <div id="plots-container-parent">
                <i class="material-icons button" id="fullscreen" title="toggle full screen">fullscreen</i>
                <div id="plots-container"></div>
                <div id="grid-options">
                    <i class="material-icons button" style="color:purple;" id="toggle-grid" title="toggle grid mode">grid_off</i>
                    <div id="slider-grid" title="adjust plot size"></div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block script2 %}
    <script src="../static/js/main.js"></script>
{% endblock %}